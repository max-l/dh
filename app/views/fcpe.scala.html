@(mpo: MainPageObject, displayName: Option[String])
<!DOCTYPE html>

<html>
    <head>

     <style type="text/css">
     
     </style>

     <link rel="stylesheet" href="@routes.Assets.at("stylesheets/bootstrap.css")">

     <script type="text/javascript" src="https://www.google.com/jsapi"></script>
     <!--
     <script src="@routes.Assets.at("javascripts/jquery-1.7.1.min.js")"    type="text/javascript"></script>
     -->
     <script src="@routes.Assets.at("jquery-ui/development-bundle/jquery-1.7.1.js")"    type="text/javascript"></script>
     <script src="@routes.Assets.at("jquery-ui/development-bundle/ui/jquery-ui-1.8.18.custom.js")"    type="text/javascript"></script>

     <script src='@routes.Assets.at("javascripts/bootstrap-dropdown.js")'  type="text/javascript"></script>
     <script src='@routes.Assets.at("javascripts/bootstrap-scrollspy.js")' type="text/javascript"></script>
     <script src='@routes.Assets.at("javascripts/bootstrap-collapse.js")'  type="text/javascript"></script>
     <script src='@routes.Assets.at("javascripts/bootstrap-tooltip.js")'   type="text/javascript"></script>
     <script src='@routes.Assets.at("javascripts/bootstrap-button.js")'   type="text/javascript"></script>
     <script src='@routes.Assets.at("javascripts/bootstrap-tab.js")'   type="text/javascript"></script>
     <script src='@routes.Assets.at("javascripts/bootstrap-modal.js")'  type="text/javascript"></script>
     
     <script type="text/javascript">
       google.load("visualization", "1", {packages:["corechart"]});

       //google.setOnLoadCallback(function() {})

       function login() {
         window.location.href = '@Html(mpo.facebookLogginPage)'
       }

       function logout() {
         window.location.href = '/logout'
       }

        function inviteVoters(decisionId) {
          FB.ui({method: 'apprequests',
            message: 'Invitation to vote on ...',
            data: 'abc123'
          },
          function requestCallback(response) {
            if(response != null) {
              response.decisionId = decisionId
              var z = JSON.stringify(response)
              //$('#logDiv').append(z);
              $.ajax({
                type: 'POST',
                url: "/recordInvitationList",
                data: z,
                success: function() {},
                contentType: "application/json; charset=utf-8",
                dataType: 'json'
              });
             }
          });
        };

       var centerPanelUrl = null
       
       function refreshCenterPanel() {
         ajaxAction(centerPanelUrl)
       }
       
       function ajaxAction(url) {
         if(url != null) {
           $('#centerPanel').load(url, function() {})
           centerPanelUrl = url
         }
       }

       function myDecisions() {
         ajaxAction('/decisionSummaries')
       }

       function decisionDetails(id) {
         ajaxAction('/p/' + id)
       }
       
       function vote(decisionId) {
         ajaxAction('/vote/' + decisionId)
       }       
       
       function newDecisions() {
         ajaxAction('/decision/create')
       }

       function drawChart(targetDiv, chartWidth, data) {

         var options = {
           width: chartWidth,
           height: chartWidth,
           legend: {position : 'none'},
           chartArea : {top: 0, left: 0, width: chartWidth, height: chartWidth}
         }

         var t = new google.visualization.DataTable();
         t.addColumn('string', '');
         t.addColumn('number', '');
         t.addRows(data.length)

         for(i = 0; i < data.length; i++) {
           t.setValue(i, 0, data[i][0])
           t.setValue(i, 1, data[i][1])
         }

         new google.visualization.PieChart(targetDiv).draw(t, options);
       }

     </script>

    </head>
    <body>


    <div id="fb-root"></div>
    <script>
      @facebookClientSideAuth("300426153342097")
    </script>


    <div class="container">

<!-- Navbar ================================================== -->
<section id="navbar">
  <div class="navbar">
      <div class="container" style="width: auto;">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">Decision Hub</a>
        <div class="nav-collapse">
          <ul class="nav">

            <li class="active"><a onClick='refreshCenterPanel()'>refresh center panel</a></li>
            
            <li class="active"><a onClick='myDecisions()'>My Decisions</a></li>

            <li class="divider-vertical"></li>
            
            <li class="active"><a onClick='newDecisions()'>New Decision</a></li>
            
            <li class="divider-vertical"></li>

            @mpo.displayName.map { dn =>
               <li class="active"><a>@dn</a></li>
               <li class="active"><a onClick='logout()'>Logout</a></li> 
             }.getOrElse {
               <li class="active"><a onClick='login()'>Login</a></li>
             }
          </ul>
          <form class="navbar-search pull-left" action="">
            <input type="text" class="search-query span2" placeholder="Search"/>
          </form>
          <ul class="nav pull-right">
            <li><a href="#">About</a></li>
          </ul>
        </div>
      </div>
    
  </div><!-- /navbar -->
</section>

<section>
  <div class="container">

    <div id="centerPanel"></div>

  </div>

</section>

  </div>
  </body>
</html>
