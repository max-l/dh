@(decisionId: Long)
<!DOCTYPE html>

  @js(p: String) = {<script src='@routes.Assets.at("javascripts/" + p)'  type="text/javascript"></script>}

  @css(p: String) = {<link  href='@routes.Assets.at("stylesheets/" + p)' rel="stylesheet"/>}

  @jsv(p: String, version: String) = {<script src='@routes.Assets.at("javascripts/" + p)'  type="text/javascript"></script>}

  @cssv(p: String, version: String) = {<link  href='@routes.Assets.at("stylesheets/" + p)' rel="stylesheet"/>}

  @template(id: String)(body: Html) = {
    <script type="text/template" id="@id">
      @body
    </script>
  }

<html>
  <head>

    <link rel="stylesheet" href="@routes.Assets.at("javascripts/jquery-custom/themes/ui-lightness/jquery-ui-1.8.18.custom.css")">

    @css("bootstrap.css")
    @css("timepicker.css")

    <script id="rowT" type="text/x-handlebars-template">
      <div class='row'>
        <div class='control-group'>
          <div class='span1'>
            <label class="control-label">{{label}}</label>
          </div>
          <div class='span6'>
            <div class="controls">
              {{content}}
              <span class="help-inline"></span>
            </div>
          </div>
        </div>
      </div>
    </script>
    
    <script id="choiceTemplate" type="text/x-handlebars-template">
      <input type="text" value="{{text}}"/><i class="icon-remove"></i>
    </script>

    <script id="decisionViewTemplate" type="text/x-handlebars-template">
      <form class="form-horizontal">

        {{# applyTemplate "rowT" label="Title"}}
          <input name='title' type="text" value="{{title}}"/>
        {{/ applyTemplate}}

        {{# applyTemplate "rowT" label="Choices"}}
          <div id="choiceList">
              <input type="text" placeholder="Enter choices"></input>
              <ul></ul>
          </div>          â€‹
        {{/ applyTemplate}}

        {{# applyTemplate "rowT" label="Election ends"}}
          <div class="btn-group" data-toggle="buttons-radio">
            <a button class="btn" id='toggleEndsWhenComplete'> when every one has voted</a>
            <a button class="btn" id='toggleEndsAt'> at fixed date time</a>
          </div>
        {{/ applyTemplate}}

        <div id='endTime'>
           {{# applyTemplate "rowT" label="Ends Time"}}
             <div data-provide='datetimepicker'></div>
           {{/ applyTemplate}}
        </div>

        {{# applyTemplate "rowT" label="Description"}}
          <textarea name='summary' class='input-xlarge' type="textarea"></textarea>
        {{/ applyTemplate}}
      </form>
    </script>

    <script id="voteTemplate" type="text/x-handlebars-template">
      <table>
        <tbody>
          {{# each scores}}
            <tr>
              <td><h4>{{this.title}}</h4></td>
              <td>
                <div class="btn-group" data-toggle="buttons-radio">
                  <a href='#' altId='{{this.alternativeId}}' score='-2' class='btn'>-2</a>
                  <a href='#' altId='{{this.alternativeId}}' score='-1' class='btn'>-1</a>
                  <a href='#' altId='{{this.alternativeId}}' score= '0' class='btn'> 0</a>
                  <a href='#' altId='{{this.alternativeId}}' score= '1' class='btn'> 1</a>
                  <a href='#' altId='{{this.alternativeId}}' score= '2' class='btn'> 2</a>
                </div>
              </td>
            </tr>
          {{/ each}}
        </tbody>
      </table>
    </script>
    
    <script id="choiceTemplate" type="text/x-handlebars-template">
      <input type="text" value="{{title}}"/><i class="icon-remove"></i>'
    </script>
  </head>
  
  <body>
    <div class="container">
      <div class="row">
         <div class="tabbable" id='mainPanel'>
           <ul class="nav nav-tabs">
             <li class="active"><a data-toggle="tab" href="#adminTab">Admin</a></li>
             <li><a data-toggle="tab" href="#voteTab">Vote</a></li>
             <li><a data-toggle="tab" href="#participantsTab">Participants</a></li>
           </ul>
           <div class="tab-content">
             <div class="tab-pane active" id="adminTab"></div>
             <div class="tab-pane active" id="voteTab"></div>
             <div class="tab-pane" id="participantsTab">Participants</div>
           </div>
         </div>
      </div>
    </div>

    @js("jquery-1.7.1.min.js")
    @js("jquery-custom/ui/jquery-ui-1.8.18.custom.js")

    @js("underscore.js")
    @js("backbone.js")
    @js("bootstrap.js")
    @js("handlebars-1.0.0.beta.6.js")

    @js("bootstrap-timepicker.js")

    @js("handlebarsHelpers.js")
    @js("datetimepicker.js")
    
    <script>
      var handlebarsTemplates = $("script[type='text/x-handlebars-template']");
      console.log(handlebarsTemplates);
      Templates = {};
      
      handlebarsTemplates.each(function(i, templateElement) {
        var t0 = $(templateElement);
        var t = Handlebars.compile(t0.html());
        Templates[t0.attr('id')] = t
      })
      
      initHandlebarsHelpers(Templates)
    </script>

    @js("decisionForm.js")
    @js("votePanel.js")
    @js("dynList.js")
    @js("main.js")

    <script>initializeApp(@decisionId)</script>

  </body>
  
<html>
