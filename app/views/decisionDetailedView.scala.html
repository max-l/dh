@(decisionSummary: DSummary, currentUserId: Option[Long]) <!-- //, voteIfParticipantAndLogged: Option[Seq[CastedVote]]) -->


<h1>@decisionSummary.title</h1>

<br/>

@if(currentUserId.map(_ == decisionSummary.decision.ownerId).getOrElse(false)) {
   <a onClick='inviteVoters(@decisionSummary.decision.id)'>Invite voters</a>
}
<div class="row">

  <div class="span8">  
  
 
      
        @for(a <- decisionSummary.alternativeSummaries) {
      
          <h4>@a.alternativeTitle</h4> <br/>
          <div class="progress">
            <div class="bar" style="width: @a.percentageOfMaximumPoints(decisionSummary)%">
            </div>
          </div>
        }
  
 
  </div>
  
 <div class="span4" id="__dsum@decisionSummary.decision.id"></div>  
</div>

<script>

  drawChart(document.getElementById('__dsum@decisionSummary.decision.id'), 240, @Html(decisionSummary.pieChartData))

  function popVote() {
    $('#voteScreen').load('/vote/' + @decisionSummary.decision.id, function() {
      $('#voteScreen').modal('show')
    })
  }

</script>


<div id="voteScreen" class="modal hide fade"></div>

<a data-toggle="modal" onClick='popVote()' class="btn btn-primary btn-large">Vote</a>
