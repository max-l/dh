@()
<!DOCTYPE html>

  @js(p: String) = {<script src='@routes.Assets.at("javascripts/" + p)'  type="text/javascript"></script>}

  @css(p: String) = {<link  href='@routes.Assets.at("stylesheets/" + p)' rel="stylesheet"/>}

  @jsv(p: String, version: String) = {<script src='@routes.Assets.at("javascripts/" + p)'  type="text/javascript"></script>}

<html>
  <head>

    <link rel="stylesheet" href="@routes.Assets.at("javascripts/jquery-custom/themes/ui-lightness/jquery-ui-1.8.18.custom.css")">

    @css("bootstrap.css")
    @css("timepicker.css")
    
    <style type="text/css">
      .voteblock {
        float: left;
        margin-right: 10px;
      }
      .clearVoteBlock {
        clear: left;
      }
    </style>

    <script id="voteTemplate" type="text/x-handlebars-template">
      <table>
          {{# each scores}}
            <tr>
              {{# if this.title}} <td><h4>{{this.title}}</h4></td> {{/ if}}
              <td>
                <div class="btn-group" data-toggle="buttons-radio">
                  <a href='#' altId='{{this.alternativeId}}' score='-2' class='btn'>-2</a>
                  <a href='#' altId='{{this.alternativeId}}' score='-1' class='btn'>-1</a>
                  <a href='#' altId='{{this.alternativeId}}' score= '0' class='btn'> 0</a>
                  <a href='#' altId='{{this.alternativeId}}' score= '1' class='btn'> 1</a>
                  <a href='#' altId='{{this.alternativeId}}' score= '2' class='btn'> 2</a>
                </div>
              </td>
            </tr>
          {{/ each}}
      </table>
    </script>

    <script id="choiceTemplate" type="text/x-handlebars-template">
      <input type="text" value="{{title}}"/><i class="icon-remove"></i>'
    </script>
  </head>

  <body>
    <div class="container">

      <div class="tabbable tabs-left">
        <ul class="nav nav-tabs">
          <li class="active">
              <a href="#tab1" data-toggle="tab">Section 1</a></li>
          <li>
              <a href="#tab2" data-toggle="tab">Section 2</a></li>
        </ul>
        <div class="tab-content">
           <div class="tab-pane active" id="tab1">
             <p>I'm in Section 1.</p>
           </div>
           <div class="tab-pane" id="tab2">
             <p>Howdy, I'm in Section 2.</p>
           </div>
        </div>
      </div>
      
      <div class="row">
         <div id='v1' class='voteblock'></div>
         <div id='v2' class='voteblock'></div>
         <div id='v3' class='voteblock'>
           <table>
                 <tr><td><a total='0' class='btn'>1</a></td></tr>
                 <tr><td><a total='1' class='btn'>3</a></td></tr>
                 <tr><td><a total='2' class='btn'>-2</a></td></tr>
                 <tr><td><a total='3' class='btn'>0</a></td></tr>
           </table>
         </div>
         <span class='clearVoteBlock'></span>
      </div>
    </div>

    @js("jquery-1.7.1.min.js")
    @js("jquery-custom/ui/jquery-ui-1.8.18.custom.js")

    @js("underscore.js")
    @js("backbone.js")
    @js("bootstrap.js")
    @js("handlebars-1.0.0.beta.6.js")

    @js("bootstrap-timepicker.js")

    @js("handlebarsHelpers.js")
    
    
    <script>
      var handlebarsTemplates = $("script[type='text/x-handlebars-template']");
      Templates = {};
      
      handlebarsTemplates.each(function(i, templateElement) {
        var t0 = $(templateElement);
        var t = Handlebars.compile(t0.html());
        Templates[t0.attr('id')] = t
      })
      
      initHandlebarsHelpers(Templates)
    </script>

    @js("votePanelDemo.js")

    <script>
      Ballot = Backbone.Model.extend({});
      
      var v1 = new Ballot({"scores":[
        {"alternativeId":0,"title":"Candidat 1", currentScore: 2},
        {"alternativeId":1,"title":"Candidat 2","currentScore":2},
        {"alternativeId":2,"title":"Candidat 3","currentScore":-1},
        {"alternativeId":3,"title":"Candidat 4","currentScore":2}]});

      var v2 = new Ballot({"scores":[
        {"alternativeId":0,"currentScore":-1},
        {"alternativeId":1,"currentScore":1},
        {"alternativeId":2,"currentScore":-1},
        {"alternativeId":3,"currentScore":-2}]});

      var totalUpdater = function(altId) {
        var a = $('a[total=' + altId + ']')

        var s1 = v1.get('scores')[altId].currentScore
        var s2 = v2.get('scores')[altId].currentScore
        var tot = parseInt(s1) + parseInt(s2)
        a.text('' + tot)
      };

      createBallotView(v1, $('#v1'), Templates, totalUpdater).render();
      createBallotView(v2, $('#v2'), Templates, totalUpdater).render();
      //createBallotView(v3, $('#v3'), Templates).render();
    </script>

  </body>
  
<html>
